{
  "version": 3,
  "sources": ["../src/nodeOops.ts", "../src/modules/patchEvent.ts", "../src/modules/patchClass.ts", "../src/modules/patchStyle.ts", "../src/modules/patchAttr.ts", "../src/patchProp.ts", "../../runtime-core/src/index.ts", "../src/index.ts"],
  "sourcesContent": ["// \u4E3B\u8981\u662F\u5BF9\u8282\u70B9\u5143\u7D20\u7684\u589E\u5220\u6539\u67E5\r\n\r\nexport const nodeOops = {\r\n  // \u5982\u679C anchor \u4E3A\u7A7A, \u76F8\u5F53\u4E8E appendChild\r\n  insert(el, parent, anchor) {\r\n    // container.appendChild(el);\r\n    parent.insertBefore(el, anchor || null);\r\n  },\r\n  remove(el) {\r\n    const parent = el.parentNode;\r\n    parent && parent.removeChild(el);\r\n  },\r\n  createElement(type) {\r\n    return document.createElement(type);\r\n  },\r\n  createText(text) {\r\n    return document.createTextNode(text);\r\n  },\r\n  setText(node, text) {\r\n    node.nodeValue = text;\r\n  },\r\n  setElementText(el, text) {\r\n    el.textContent = text;\r\n  },\r\n  parentNode(node) {\r\n    return node.parentNode;\r\n  },\r\n  nextSibling(node) {\r\n    return node.nextSibling;\r\n  },\r\n};\r\n", "function createInvoker(value) {\r\n  const invoker = (e) => invoker.value(e);\r\n  invoker.value = value;\r\n\r\n  return invoker;\r\n}\r\n\r\nexport function patchEvent(el, name, nextValue) {\r\n  // div click = () => fn1() -> fn2()\r\n\r\n  // vue_event_invoker\r\n  const invokers = el._vei || (el._vei = {});\r\n  const eventName = name.slice(2).toLowerCase();\r\n\r\n  const existedInvoker = invokers[name];\r\n\r\n  if (nextValue && existedInvoker) {\r\n    // \u4E8B\u4EF6\u6362\u7ED1\r\n    return (existedInvoker.value = nextValue);\r\n  }\r\n\r\n  if (nextValue) {\r\n    // \u521B\u5EFA\u4E00\u4E2A\u8C03\u7528\u51FD\u6570, \u5E76\u4E14\u5185\u90E8\u4F1A\u6267\u884C nextValue\r\n    const invoker = (invokers[name] = createInvoker(nextValue));\r\n    return el.addEventListener(eventName, invoker);\r\n  }\r\n\r\n  if (existedInvoker) {\r\n    // \u79FB\u9664\u4E8B\u4EF6\r\n    el.removeEventListener(name, existedInvoker);\r\n    invokers[name] = undefined;\r\n  }\r\n}\r\n", "export function patchClass(el, value) {\r\n  if (value === null) {\r\n    el.removeAttribute('class');\r\n  } else {\r\n    el.className = value;\r\n  }\r\n}\r\n", "export function patchStyle(el, prevValue, nextValue) {\r\n  let style = el.style;\r\n\r\n  for (let key in nextValue) {\r\n    style[key] = nextValue[key];\r\n  }\r\n\r\n  if (prevValue) {\r\n    for (let key in prevValue) {\r\n      if (nextValue[key] === null) {\r\n        style[key] = null;\r\n      }\r\n    }\r\n  }\r\n}\r\n", "export function patchAttr(el, key, value) {\r\n  if (value) {\r\n    el.setAttribute(key, value);\r\n  } else {\r\n    el.removeAttribute(key);\r\n  }\r\n}\r\n", "// \u4E3B\u8981\u662F\u5BF9\u8282\u70B9\u5143\u7D20\u7684\u5C5E\u6027\u7684\u64CD\u4F5C class style event\r\nimport { patchEvent } from './modules/patchEvent';\r\nimport { patchClass } from './modules/patchClass';\r\nimport { patchStyle } from './modules/patchStyle';\r\nimport { patchAttr } from './modules/patchAttr';\r\n\r\nexport default function patchProp(el, key, prevValue, nextValue) {\r\n  if (key === 'class') {\r\n    return patchClass(el, nextValue);\r\n  } else if (key === 'style') {\r\n    // { color: red } { background: red }\r\n    return patchStyle(el, prevValue, nextValue);\r\n  } else if (/^on[^a-z]/.test(key)) {\r\n    return patchEvent(el, key, nextValue);\r\n  } else {\r\n    return patchAttr(el, key, nextValue);\r\n  }\r\n}\r\n", "export function createRenderer(renderOptions) {\r\n  // core \u4E2D\u4E0D\u5173\u5FC3\u5982\u4F55\u6E32\u67D3\r\n\r\n  const {\r\n    insert: hostInsert,\r\n    remove: hostRemove,\r\n    patchProp: hostPatchProp,\r\n    createElement: hostCreateElement,\r\n    createText: hostCreateText,\r\n    setText: hostSetText,\r\n    setElementText: hostSetElementText,\r\n    parentNode: hostParentNode,\r\n    nextSibling: hostNextSibling,\r\n  } = renderOptions;\r\n\r\n  const mountElement = (vnode, container) => {\r\n    const { type, children, props } = vnode;\r\n\r\n    let el = hostCreateElement(type);\r\n\r\n    hostSetElementText(el, children);\r\n\r\n    for (let key in props) {\r\n      hostPatchProp(el, key, null, props[key]);\r\n    }\r\n\r\n    hostInsert(el, container);\r\n  };\r\n\r\n  const patch = (n1, n2, container) => {\r\n    if (n1 === n2) return; // \u76F8\u540C\u5143\u7D20, \u8DF3\u8FC7\r\n\r\n    if (n1 === null) {\r\n      mountElement(n2, container);\r\n    }\r\n  };\r\n\r\n  const render = (vnode, container) => {\r\n    // \u5C06\u865A\u62DF\u8282\u70B9 -> \u771F\u5B9E\u8282\u70B9\r\n    patch(container._vnode || null, vnode, container);\r\n\r\n    container._vnode = vnode;\r\n  };\r\n\r\n  return { render };\r\n}\r\n", "import { nodeOops } from './nodeOops';\r\nimport patchProp from './patchProp';\r\n\r\nimport { createRenderer } from '@vue/runtime-core';\r\nconst renderOptions = Object.assign(nodeOops, { patchProp });\r\n\r\n// render \u65B9\u6CD5\u91C7\u7528 domapi \u8FDB\u884C\u6E32\u67D3\r\nconst render = (vnode, container) => {\r\n  return createRenderer(renderOptions).render(vnode, container);\r\n};\r\n\r\nexport { renderOptions, render };\r\nexport * from '@vue/runtime-core';\r\n\r\n// runtime-dom -> runtime-core -> reactivity\r\n"],
  "mappings": "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",
  "names": ["renderOptions", "render"]
}
